# テーブル定義書

**Source**: `src/main/resources/schema.sql`
**Date**: 2025-12-09

---

## 目次

1. [TASK_CATEGORIES](#1-task_categories-タスクカテゴリー)
2. [TASKS](#2-tasks-タスク)

---

## 詳細

### 1. TASK_CATEGORIES (タスクカテゴリー)

**物理名**: `task_categories`
**説明**: タスクを分類するためのカテゴリー情報を管理するマスターテーブル

#### カラム一覧

| No | 物理名 | 論理名 | 型 | NULL不可 | Default | 制約 | 説明 |
|:---:|---|---|---|:---:|---|:---:|---|
| 1 | id | ID | BIGINT | ✓ | AI | PK | カテゴリーの一意識別子（自動採番） |
| 2 | name | カテゴリー名 | VARCHAR(50) | ✓ | - | - | カテゴリーの表示名 |
| 3 | description | 説明 | VARCHAR(200) | - | - | - | カテゴリーの説明文 |
| 4 | color | カラーコード | VARCHAR(7) | - | '#6c757d' | - | 表示用カラー（HEX形式） |
| 5 | display_order | 表示順 | INT | - | 0 | - | 一覧での表示順序 |
| 6 | created_at | 作成日時 | TIMESTAMP | ✓ | CURRENT_TIMESTAMP | - | レコード作成日時 |
| 7 | updated_at | 更新日時 | TIMESTAMP | ✓ | CURRENT_TIMESTAMP | - | レコード最終更新日時 |

#### 関連性

* **Primary Key**: `id`
* **Foreign Keys (Outgoing)**: このテーブル **が** 参照している
    * なし
* **Foreign Keys (Incoming)**: このテーブル **を** 参照している
    * `tasks.category_id` -> `task_categories.id`

#### インデックス

| Index Name | Type | Columns |
|---|---|---|
| idx_task_categories_name | Normal | name |
| idx_task_categories_display_order | Normal | display_order |

---

### 2. TASKS (タスク)

**物理名**: `tasks`
**説明**: タスク情報を管理するメインテーブル

#### カラム一覧

| No | 物理名 | 論理名 | 型 | NULL不可 | Default | 制約 | 説明 |
|:---:|---|---|---|:---:|---|:---:|---|
| 1 | id | ID | BIGINT | ✓ | AI | PK | タスクの一意識別子（自動採番） |
| 2 | title | タイトル | VARCHAR(100) | ✓ | - | - | タスクのタイトル |
| 3 | description | 説明 | TEXT | - | - | - | タスクの詳細説明 |
| 4 | status | ステータス | VARCHAR(20) | ✓ | 'TODO' | - | タスクの進捗状態（TODO/IN_PROGRESS/DONE） |
| 5 | priority | 優先度 | VARCHAR(10) | ✓ | 'MEDIUM' | - | タスクの優先度（LOW/MEDIUM/HIGH） |
| 6 | category_id | カテゴリーID | BIGINT | - | - | FK | 所属カテゴリーへの参照 |
| 7 | due_date | 期限日 | DATE | - | - | - | タスクの期限日 |
| 8 | created_at | 作成日時 | TIMESTAMP | ✓ | CURRENT_TIMESTAMP | - | レコード作成日時 |
| 9 | updated_at | 更新日時 | TIMESTAMP | ✓ | CURRENT_TIMESTAMP | - | レコード最終更新日時 |

#### 関連性

* **Primary Key**: `id`
* **Foreign Keys (Outgoing)**: このテーブル **が** 参照している
    * `category_id` -> `task_categories.id` (ON DELETE SET NULL)
* **Foreign Keys (Incoming)**: このテーブル **を** 参照している
    * なし

#### インデックス

| Index Name | Type | Columns |
|---|---|---|
| idx_tasks_status | Normal | status |
| idx_tasks_priority | Normal | priority |
| idx_tasks_category_id | Normal | category_id |
| idx_tasks_due_date | Normal | due_date |

---

## 検証項目

- [x] **網羅性**: DDL内の全てのテーブル（2テーブル）が含まれている
- [x] **FK整合性**: `tasks.category_id` -> `task_categories.id` の参照/被参照が矛盾なく記載されている
- [x] **フォーマット**: Markdownの表崩れなし
- [x] **制約記号**: PK, FK, AI が正しくマッピングされている
